{"ast":null,"code":"import _slicedToArray from\"/workspace/BOX-OFFICE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/workspace/BOX-OFFICE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useReducer,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import ShowMainData from\"../components/shows/ShowMainData\";//import Details from \"../components/shows/Details\";\nimport Details from\"../components/shows/Details\";import Seasons from\"../components/shows/Seasons\";import Cast from\"../components/shows/Cast\";//import { apiGet } from '../misc/config';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(prevState,action){switch(action.type){case\"FETCH_SUCCESS\":{return{isLoading:false,error:null,show:action.show};}case\"FETCH_FAILED\":{return _objectSpread(_objectSpread({},prevState),{},{isLoading:false,error:action.error});}default:return prevState;}};var initialState={show:null,isLoading:true,error:null};var Show=function Show(){var _useParams=useParams(),id=_useParams.id;console.log(id);var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],show=_useReducer2$.show,isLoading=_useReducer2$.isLoading,error=_useReducer2$.error,dispatch=_useReducer2[1];useEffect(function(){var isMounted=true;axios(\"https://api.tvmaze.com/shows/\"+id+\"?embed[]=seasons&embed[]=cast\").then(function(results){if(isMounted){dispatch({type:\"FETCH_SUCCESS\",show:results.data});}}).catch(function(err){if(isMounted){dispatch({type:\"FETCH_FAILED\",error:err.message});}});return function(){isMounted=false;};},[id]);console.log(\"show\",show);//console.log(res);\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Data is being loaded\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error occured: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ShowMainData,{image:show.image,name:show.name,rating:show.rating,summary:show.summary,tags:show.genres}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Details\"}),/*#__PURE__*/_jsx(Details,{status:show.status,network:show.network,premiered:show.premiered})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Seasons\"}),/*#__PURE__*/_jsx(Seasons,{seasons:show._embedded.seasons})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cast\"}),/*#__PURE__*/_jsx(Cast,{cast:show._embedded.cast})]})]});};export default Show;","map":{"version":3,"names":["React","useEffect","useReducer","useState","useParams","axios","ShowMainData","Details","Seasons","Cast","reducer","prevState","action","type","isLoading","error","show","initialState","Show","id","console","log","dispatch","isMounted","then","results","data","catch","err","message","image","name","rating","summary","genres","status","network","premiered","_embedded","seasons","cast"],"sources":["/workspace/BOX-OFFICE/src/pages/Show.js"],"sourcesContent":["import React, { useEffect, useReducer, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\"\nimport ShowMainData from \"../components/shows/ShowMainData\";\n//import Details from \"../components/shows/Details\";\nimport Details from \"../components/shows/Details\";\nimport Seasons from \"../components/shows/Seasons\";\nimport Cast from \"../components/shows/Cast\";\n\n//import { apiGet } from '../misc/config';\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case \"FETCH_SUCCESS\": {\n      return { isLoading: false, error: null, show: action.show };\n    }\n    case \"FETCH_FAILED\": {\n      return { ...prevState, isLoading: false, error: action.error };\n    }\n    default:\n      return prevState;\n  }\n};\nconst initialState = {\n  show: null,\n  isLoading: true,\n  error: null\n};\n\nconst Show = () => {\n \n  const { id } = useParams();\n  console.log(id);\n  const [{ show, isLoading, error }, dispatch] = useReducer(\n    reducer,\n    initialState\n  );\n\n  useEffect(() => {\n    let isMounted = true;\n    axios(\"https://api.tvmaze.com/shows/\"+id+\"?embed[]=seasons&embed[]=cast\")\n      .then((results) => {\n       if (isMounted) {\n        dispatch({ type: \"FETCH_SUCCESS\", show: results.data });\n        }\n      })\n      \n      .catch((err) => {\n        if (isMounted) {\n          dispatch({ type: \"FETCH_FAILED\", error: err.message });\n       }\n      });\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n\n  console.log(\"show\", show);\n //console.log(res);\n  if (isLoading) {\n    return <div><h3>Data is being loaded</h3></div>;\n  }\n\n  if (error) {\n    return <div>Error occured: {error}</div>;\n  }\n\n  return (\n    <div>\n      <ShowMainData\n        image={show.image}\n        name={show.name}\n        rating={show.rating}\n        summary={show.summary}\n        tags={show.genres}\n      />\n\n      <div>\n        <h2>Details</h2>\n        <Details\n          status={show.status}\n          network={show.network}\n          premiered={show.premiered}\n        />\n      </div>\n\n      <div>\n        <h2>Seasons</h2>\n        <Seasons seasons={show._embedded.seasons} />\n      </div>\n\n      <div>\n        <h2>Cast</h2>\n        <Cast cast={show._embedded.cast} />\n      </div>\n    </div>\n\n  );\n};\n\nexport default Show;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}